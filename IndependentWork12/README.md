# –°–∞–º–æ—Å—Ç—ñ–π–Ω–∞ —Ä–æ–±–æ—Ç–∞ No12

**–¢–µ–º–∞:** *PLINQ: –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Ç–∞ –±–µ–∑–ø–µ–∫–∏.*
---
**–ú–µ—Ç–∞:** *–î–æ—Å–ª—ñ–¥–∏—Ç–∏ –ø–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞ –Ω–µ–¥–æ–ª—ñ–∫–∏ PLINQ (Parallel LINQ) —É –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—ñ –∑—ñ –∑–≤–∏—á–∞–π–Ω–∏–º LINQ,
–≤–∏–º—ñ—Ä—è—Ç–∏ –π–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –æ–±—Å—è–≥–∞—Ö –¥–∞–Ω–∏—Ö —Ç–∞ –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏
–±–µ–∑–ø–µ–∫–∏ –ø—Ä–∏ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ–π –æ–±—Ä–æ–±—Ü—ñ.*

---

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –µ–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—É
- –î–∞–Ω—ñ: List<double> –∑ –≤–∏–ø–∞–¥–∫–æ–≤–∏–º–∏ —á–∏—Å–ª–∞–º–∏ –≤—ñ–¥ 0 –¥–æ 1 000 000.
- –†–æ–∑–º—ñ—Ä–∏ –∫–æ–ª–µ–∫—Ü—ñ–π:
  - 1 000 000
  - 5 000 000
  - 10 000 000
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è: x > 500 000
- –§—É–Ω–∫—Ü—ñ—è HeavyMathOperation:
      sqrt ‚Üí sin ‚Üí cos ‚Üí log
- –ü–æ—Ä—ñ–≤–Ω—é–≤–∞–≤: LINQ vs PLINQ (AsParallel)
- –ß–∞—Å –≤–∏–º—ñ—Ä—é–≤–∞–≤ —á–µ—Ä–µ–∑ Stopwatch.



---
## –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–∞–ø—É—Å–∫—É:
![screen](images/1.png)
–°—É–º–∏ –º–∞–π–∂–µ –æ–¥–Ω–∞–∫–æ–≤—ñ ‚Äî —Ä—ñ–∑–Ω–∏—Ü—è —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ double rounding. –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.
---
## Side Effects ‚Äî —è–∫ –ø–∞—Ä–∞–ª–µ–ª—å–Ω—ñ –∑–∞–¥–∞—á—ñ "–ª–∞–º–∞—é—Ç—å" –∑–º—ñ–Ω–Ω—ñ
–ú–∞—é –¥–∞–Ω—ñ: –≤—ñ–¥ 1 –¥–æ 2 000 000
–û—á—ñ–∫—É–≤–∞–Ω–æ –ø–∞—Ä–Ω–∏—Ö: 1 000 000
---
–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
![screen](images/image.png)
–†–µ–∑—É–ª—å—Ç–∞—Ç: 
![screen](images/4.png)
---
–ü—Ä–∏—á–∏–Ω–∞:
- ++ —É –±–∞–≥–∞—Ç—å–æ—Ö –ø–æ—Ç–æ–∫–∞—Ö = –≥–æ–Ω–∫–∞ –¥–∞–Ω–∏—Ö. –ß–∞—Å—Ç–∏–Ω–∞ —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç—ñ–≤ –ø—Ä–æ—Å—Ç–æ –≥—É–±–∏—Ç—å—Å—è.
---
–ü–†–ê–í–ò–õ–¨–ù–û:
![screen](images/5.png)
---
–†–µ–∑—É–ª—å—Ç–∞—Ç:
![alt text](image.png)
---
- Interlocked –≥–∞—Ä–∞–Ω—Ç—É—î –∞—Ç–æ–º–∞—Ä–Ω—ñ—Å—Ç—å.
---
## –í–∏—Å–Ω–æ–≤–∫–∏:
1Ô∏è. PLINQ –¥–∞—î —Å–µ–Ω—Å, –∫–æ–ª–∏:
   - –≤–µ–ª–∏–∫–∏–π –æ–±—Å—è–≥ –¥–∞–Ω–∏—Ö (–º—ñ–ª—å–π–æ–Ω–∏),
   - –æ–ø–µ—Ä–∞—Ü—ñ—ó –Ω–∞–¥ –µ–ª–µ–º–µ–Ω—Ç–æ–º –¥–æ—Ä–æ–≥—ñ (–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, CPU),
   - –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–æ–±–∫–∏ –Ω–µ–≤–∞–∂–ª–∏–≤–∏–π.

2Ô∏è. –Ø–∫—â–æ –æ–ø–µ—Ä–∞—Ü—ñ—è –ø—Ä–æ—Å—Ç–∞ (x*2), –≤–∏–≥—Ä–∞—à –º–∞–π–∂–µ –∑–Ω–∏–∫–∞—î ‚Äî
   –Ω–∞–∫–ª–∞–¥–Ω—ñ –≤–∏—Ç—Ä–∞—Ç–∏ –ø–∞—Ä–∞–ª–µ–ª–∏—Ç—å—Å—è –Ω–µ –æ–∫—É–ø–∞—é—Ç—å—Å—è.

3Ô∏è. –ü–∞—Ä–∞–ª–µ–ª—å–Ω—ñ—Å—Ç—å + –≥–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ = –Ω–µ–±–µ–∑–ø–µ–∫–∞.
   - ++, —Å–ø–∏—Å–∫–∏, —Å–ª–æ–≤–Ω–∏–∫–∏ –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—ó ‚Äî üí£
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ:
        Interlocked
        lock
        ConcurrentCollections
        –∞–±–æ –ø–æ–≤–Ω—ñ—Å—Ç—é —É–Ω–∏–∫–∞–π—Ç–µ side effects
---
PLINQ ‚Äî –Ω–µ —á–∞—Ä—ñ–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞ Turbo.
–í—ñ–Ω –ø—Ä–∞—Ü—é—î —Ç–æ–¥—ñ, –∫–æ–ª–∏ —Ä–æ–±–æ—Ç–∞ –≤–∞–∂–∫–∞ —ñ –≤–µ–ª–∏–∫–∞.
–ê–ª–µ —è–∫—â–æ —É –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ–º—É –∫–æ–¥—ñ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Å–ø—ñ–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –±–µ–∑ –∑–∞—Ö–∏—Å—Ç—É ‚Äî
–ø—Ä–æ–±–ª–µ–º–∏ –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω—ñ.
---
